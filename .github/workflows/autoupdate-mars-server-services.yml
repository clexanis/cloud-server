name: "Auto-update the service files from mars-server"
on:
  schedule:
    - cron: '42 0 * * 1'
jobs:
  update-services:
    runs-on: ubuntu-latest
    steps:
      - name: 'Checkout Repository'
        uses: actions/checkout@v4
      - name: 'Update Subtree'
        run: |
          git fetch https://github.com/borjapazr/mars-server.git main:mars-server
          git checkout mars-server
          git subtree split --prefix=services -b mars-server-services
          git checkout master
          git subtree merge --prefix=services mars-server-services
      - name: 'Create Pull Request'
        uses: peter-evans/create-pull-request@v5
        with:
          branch: "create-pull-request/mars-server-services"
          delete-branch: false
          title: "[service] Auto-update from mars-server"
          body: |
            Auto-update the service files to the latest version from the [mars-server](https://github.com/borjapazr/mars-server) repository.

            ---
            
            Auto-generated by [create-pull-request][1]
            
            [1]: https://github.com/peter-evans/create-pull-request
          labels: |
            "dependencies"
            "auto-update"
            "mars-server"
            "services"
          assignees: clexanis
          reviewers: clexanis
